<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>3bit.diy — web | code | data</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="3bit.diy operates as a small studio for precise, minimal websites: archives, art agents, research platforms, and portfolios that need to stay online and not look like templates." />
<link rel="stylesheet" href="css/style.css">
</head>

<body>

<header class="header">
  <div class="page header-inner">
    <div class="header-brand">3bit.diy</div>
    <div class="header-meta">
      <span>[ location: novi sad ]</span>
      <span>[ mode: web / code / data ]</span>
    </div>
    <nav class="header-nav" aria-label="Primary">
      <a href="#work">work</a>
      <a href="#about">about</a>
      <a href="#contact">contact</a>
    </nav>
  </div>
</header>

<main>
  <!-- HERO -->
  <section class="hero" aria-labelledby="hero-title">
    <div class="page hero-grid">

      <!-- LEFT -->
      <div>
        <div class="hero-kicker">interface construction unit</div>
        <h1 id="hero-title" class="hero-title">
          web systems for art, research, and small organisations.
        </h1>

        <p class="hero-body">
          3bit.diy operates as a small studio for <strong>precise, minimal websites</strong>:
          archives, art agents, research platforms, and portfolios that need to stay
          online and <strong>not look like templates</strong>.
        </p>

        <div class="hero-actions">
          <a href="#work" class="btn">view work</a>
          <a href="#about" class="btn">studio info</a>
        </div>

        <div class="hero-note">
          no sliders, no noise, no frameworks unless needed.
        </div>
      </div>

      <!-- RIGHT: LOG / STATUS (puni se iz JSON-a) -->
      <aside class="hero-panel" aria-label="Current work log">
        <div class="hero-panel-header">
          <div class="hero-panel-label">status log</div>
          <div class="hero-panel-status">[ online ]</div>
        </div>

        <div id="hero-log" class="hero-log">
          <!-- JS će ovde ubaciti linije iz status-log.json -->
        </div>

        <div class="hero-panel-footer">
          <span>[ stack: html · css · js · wp · custom ]</span>
          <span>[ response: email → short call → prototype ]</span>
        </div>
      </aside>

    </div>
  </section>

  <!-- WORK / PROJECTS INDEX (CSV GRID) -->
  <section id="work" class="section">
    <div class="page">
      <h2>selected work</h2>
      <!-- <p>
        projekti su predstavljeni kao tekstualni index; svaka linija je jedna instanca rada
        (godina / naziv / uloga / stack / link).
      </p> -->

      <table class="projects-grid" aria-label="Projects index">
        <thead>
          <tr>
            <th scope="col">id</th>
            <th scope="col">year</th>
            <th scope="col">title</th>
            <th scope="col">role</th>
            <th scope="col">stack</th>
          </tr>
        </thead>
        <tbody id="projects-grid">
          <!-- JS puni iz projects.csv -->
        </tbody>
      </table>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="section">
    <div class="page">
      <h2>about</h2>
      <p>
        3bit.diy is a small studio that combines artistic and research-based practice with the development of sustainable, minimalist web solutions. The focus is on clear structures, clean frontend execution, and technically reliable systems that are easy to maintain. We work with organizations, artists, research teams, and independent initiatives that need functional, fast, and transparent websites without unnecessary complexity.
      </p>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="section">
    <div class="page">
      <h2>contact</h2>
      <p>
        Email: stevan@3bit.diy
      </p>
    </div>
  </section>
</main>

<script>
// minimal helper za status-log.json
async function loadStatusLog() {
  const logEl = document.getElementById('hero-log');
  if (!logEl) return;

  try {
    const res = await fetch('./data/status-log.json', { cache: 'no-store' });
    if (!res.ok) throw new Error('status-log.json not found');
    const items = await res.json();

    logEl.innerHTML = '';

    items.forEach((item) => {
      const line = document.createElement('div');
      line.className = 'hero-log-line';

      const prefix = document.createElement('span');
      prefix.className = 'hero-log-prefix';
      prefix.textContent = `[${item.state}]`;

      const text = document.createElement('span');
      text.className = 'hero-log-text';
      text.textContent = item.text;

      line.appendChild(prefix);
      line.appendChild(text);
      logEl.appendChild(line);
    });
  } catch (err) {
    logEl.innerHTML = '<div class="hero-log-line"><span class="hero-log-prefix">[err]</span><span class="hero-log-text">status-log.json unavailable</span></div>';
  }
}

// minimal helper za projects.csv (semicolon-delimited)
async function loadProjects() {
  const tbody = document.getElementById('projects-grid');
  if (!tbody) return;

  try {
    const res = await fetch('./data/projects.csv', { cache: 'no-store' });
    if (!res.ok) throw new Error('projects.csv not found');
    const text = await res.text();

    const lines = text
      .trim()
      .split('\n')
      .map((l) => l.trim())
      .filter(Boolean);

    if (lines.length <= 1) return;

    const header = lines[0].split(';');
    const rows = lines.slice(1);

    tbody.innerHTML = '';

    rows.forEach((line) => {
      const cols = line.split(';');
      if (!cols.length) return;

      const row = document.createElement('tr');

      const slug = cols[0] || '';
      const year = cols[1] || '';
      const title = cols[2] || '';
      const role = cols[3] || '';
      const stack = cols[4] || '';
      const url = cols[5] || '';

      const slugCell = document.createElement('td');
      slugCell.className = 'slug-cell';
      slugCell.textContent = slug;

      const yearCell = document.createElement('td');
      yearCell.textContent = year;

      const titleCell = document.createElement('td');
      if (url) {
        const link = document.createElement('a');
        link.href = url;
        link.textContent = title || url;
        link.target = '_blank';
        link.rel = 'noopener noreferrer';
        titleCell.appendChild(link);
      } else {
        titleCell.textContent = title;
      }

      const roleCell = document.createElement('td');
      roleCell.textContent = role;

      const stackCell = document.createElement('td');
      stackCell.textContent = stack;

      row.appendChild(slugCell);
      row.appendChild(yearCell);
      row.appendChild(titleCell);
      row.appendChild(roleCell);
      row.appendChild(stackCell);

      tbody.appendChild(row);
    });
  } catch (err) {
    tbody.innerHTML = '<tr><td colspan="5">projects.csv unavailable</td></tr>';
  }
}

document.addEventListener('DOMContentLoaded', () => {
  loadStatusLog();
  loadProjects();
});
</script>

</body>
</html>